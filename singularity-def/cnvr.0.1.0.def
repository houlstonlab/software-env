Bootstrap: docker
From: bioconductor/bioconductor_docker:RELEASE_3_21

%post
    # Update package list and install dependencies
    apt-get update && apt-get install -y \
        libcurl4-openssl-dev \
        libssl-dev \
        libxml2-dev \
        libatlas-base-dev

    # Install R package 'VariantAnnotation'
    R -e "BiocManager::install('TxDb.Hsapiens.UCSC.hg38.knownGene')"
    R -e "BiocManager::install('org.Hs.eg.db')"
    R -e "BiocManager::install('AnnotationDbi')"
    R -e "BiocManager::install('GenomeInfoDb')"
    R -e "BiocManager::install('GenomicFeatures')"
    R -e "BiocManager::install('GenomicRanges')"
    R -e "BiocManager::install('IRanges')"
    R -e "BiocManager::install('ComplexHeatmap')"
    R -e "BiocManager::install('CopyNumberPlots')"
    R -e "BiocManager::install('CNVRanger')"
    R -e "install.packages('remotes')"
    R -e "remotes::install_github('mahshaaban/cnvr', dependencies = TRUE)"

%labels
    Maintainer Mahmoud Ahmed
    Version 0.1

%help
    This Singularity image is based on the Docker Hub image 'bioconductor/bioconductor_docker' and includes the R package 'cnvr'.
