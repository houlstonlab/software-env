Bootstrap: docker
From: ubuntu:22.04

%labels
    Author Mahmoud Ahmed
    Version 0.1
    Description "Singularity image for QuantiSNP"

%environment
    export PATH=/opt/quantisnp:$PATH

%post
    # Install dependencies
    apt-get update -y && apt-get install -y bc wget mlocate unzip nano gzip tar
    
    # Install MCR
    cd /opt
    wget ftp://ftp.stats.ox.ac.uk/pub/yau/quantisnp2/mcr/MCRinstaller64.run
    chmod 755 MCRinstaller64.run
    ./MCRinstaller64.run  --noexec --keep --nox11 --target Install
    cd Install
    ./MCRInstaller.bin -is:extract

    # Install QuantiSNP
    cd ..
    wget ftp://ftp.stats.ox.ac.uk/pub/yau/quantisnp2/executables/09042010/install_quantisnp
    chmod 755 install_quantisnp
    ./install_quantisnp

%runscript
    exec "$@"